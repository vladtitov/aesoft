(function(){var n,t;if(this.SVG=function(n){if(SVG.supported)return new SVG.Doc(n)},SVG.ns="http://www.w3.org/2000/svg",SVG.xlink="http://www.w3.org/1999/xlink",SVG.did=1e3,SVG.eid=function(n){return"Svgjs"+n.charAt(0).toUpperCase()+n.slice(1)+SVG.did++},SVG.create=function(n){var t=document.createElementNS(this.ns,n);return t.setAttribute("id",this.eid(n)),t},SVG.extend=function(){var n,i,r,t;for(n=[].slice.call(arguments),i=n.pop(),t=n.length-1;t>=0;t--)if(n[t])for(r in i)n[t].prototype[r]=i[r];SVG.Set&&SVG.Set.inherit&&SVG.Set.inherit()},SVG.get=function(n){var t=document.getElementById(n);if(t)return t.instance},SVG.supported=function(){return!!document.createElementNS&&!!document.createElementNS(SVG.ns,"svg").createSVGRect}(),!SVG.supported)return!1;SVG.regex={test:function(n,t){return this[t].test(n)},unit:/^(-?[\d\.]+)([a-z%]{0,2})$/,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isStyle:/^font|text|leading|cursor/,isBlank:/^(\s+)?$/,isNumber:/^-?[\d\.]+$/,isPercent:/^-?[\d\.]+%$/},SVG.defaults={matrix:"1 0 0 1 0 0",attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000"},trans:function(){return{x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,matrix:this.matrix,a:1,b:0,c:0,d:1,e:0,f:0}}},SVG.Color=function(n){var t;this.r=0,this.g=0,this.b=0,typeof n=="string"?SVG.regex.isRgb.test(n)?(t=SVG.regex.rgb.exec(n.replace(/\s/g,"")),this.r=parseInt(t[1]),this.g=parseInt(t[2]),this.b=parseInt(t[3])):SVG.regex.isHex.test(n)&&(t=SVG.regex.hex.exec(this._fullHex(n)),this.r=parseInt(t[1],16),this.g=parseInt(t[2],16),this.b=parseInt(t[3],16)):typeof n=="object"&&(this.r=n.r,this.g=n.g,this.b=n.b)},SVG.extend(SVG.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+this._compToHex(this.r)+this._compToHex(this.g)+this._compToHex(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},_fullHex:function(n){return n.length==4?["#",n.substring(1,2),n.substring(1,2),n.substring(2,3),n.substring(2,3),n.substring(3,4),n.substring(3,4)].join(""):n},_compToHex:function(n){var t=n.toString(16);return t.length==1?"0"+t:t}}),SVG.Color.test=function(n){return n+="",SVG.regex.isHex.test(n)||SVG.regex.isRgb.test(n)},SVG.Color.isRgb=function(n){return n&&typeof n.r=="number"},SVG.Array=function(n,t){n=(n||[]).valueOf(),n.length==0&&t&&(n=t.valueOf()),this.value=this.parse(n)},SVG.extend(SVG.Array,{morph:function(n){if(this.destination=this.parse(n),this.value.length!=this.destination.length){for(var t=this.value[this.value.length-1],i=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(i);while(this.value.length<this.destination.length)this.value.push(t)}return this},settle:function(){for(var t=[],n=this.value.length-1;n>=0;n--)t.indexOf(this.value[n])==-1&&t.push(this.value[n]);return this.value=t},at:function(n){if(!this.destination)return this;for(var t=0,r=this.value.length,i=[];t<r;t++)i.push(this.value[t]+(this.destination[t]-this.value[t])*n);return new SVG.Array(i)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(n){return(n=n.valueOf(),Array.isArray(n))?n:this.split(n)},split:function(n){return n.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").split(" ")}}),SVG.PointArray=function(){this.constructor.apply(this,arguments)},SVG.PointArray.prototype=new SVG.Array,SVG.extend(SVG.PointArray,{toString:function(){for(var n=0,i=this.value.length,t=[];n<i;n++)t.push(this.value[n].join(","));return t.join(" ")},at:function(n){if(!this.destination)return this;for(var t=0,r=this.value.length,i=[];t<r;t++)i.push([this.value[t][0]+(this.destination[t][0]-this.value[t][0])*n,this.value[t][1]+(this.destination[t][1]-this.value[t][1])*n]);return new SVG.PointArray(i)},parse:function(n){if(n=n.valueOf(),Array.isArray(n))return n;n=this.split(n);for(var t=0,u=n.length,i,r=[];t<u;t++)i=n[t].split(","),r.push([parseFloat(i[0]),parseFloat(i[1])]);return r},move:function(n,t){var r=this.bbox(),i;for(n-=r.x,t-=r.y,i=this.value.length-1;i>=0;i--)this.value[i]=[this.value[i][0]+n,this.value[i][1]+t];return this},size:function(n,t){for(var r=this.bbox(),i=this.value.length-1;i>=0;i--)this.value[i][0]=(this.value[i][0]-r.x)*n/r.width+r.x,this.value[i][1]=(this.value[i][1]-r.y)*t/r.height+r.x;return this},bbox:function(){if(this.value.length==0)return{x:0,y:0,width:0,height:0};for(var i=this.value[0][0],r=this.value[0][1],t={x:i,y:r},n=this.value.length-1;n>=0;n--)this.value[n][0]<t.x&&(t.x=this.value[n][0]),this.value[n][1]<t.y&&(t.y=this.value[n][1]),this.value[n][0]>i&&(i=this.value[n][0]),this.value[n][1]>r&&(r=this.value[n][1]);return t.width=i-t.x,t.height=r-t.y,t}}),SVG.Number=function(n){this.value=0,this.unit="";switch(typeof n){case"number":this.value=isNaN(n)?0:isFinite(n)?n:n<0?-34e37:34e37;break;case"string":var t=n.match(SVG.regex.unit);t&&(this.value=parseFloat(t[1]),t[2]=="%"&&(this.value/=100),this.unit=t[2]);break;default:n instanceof SVG.Number&&(this.value=n.value,this.unit=n.unit)}},SVG.extend(SVG.Number,{toString:function(){return(this.unit=="%"?~~(this.value*1e8)/1e6:this.value)+this.unit},valueOf:function(){return this.value},to:function(n){return typeof n=="string"&&(this.unit=n),this},plus:function(n){return this.value=this+new SVG.Number(n),this},minus:function(n){return this.plus(-new SVG.Number(n))},times:function(n){return this.value=this*new SVG.Number(n),this},divide:function(n){return this.value=this/new SVG.Number(n),this}}),SVG.ViewBox=function(n){var u,f,i,r,e=n.bbox(),t=(n.attr("viewBox")||"").match(/-?[\d\.]+/g);this.x=e.x,this.y=e.y,this.width=n.node.clientWidth||n.node.getBoundingClientRect().width,this.height=n.node.clientHeight||n.node.getBoundingClientRect().height,t&&(u=parseFloat(t[0]),f=parseFloat(t[1]),i=parseFloat(t[2]),r=parseFloat(t[3]),this.zoom=this.width/this.height>i/r?this.height/r:this.width/i,this.x=u,this.y=f,this.width=i,this.height=r),this.zoom=this.zoom||1},SVG.extend(SVG.ViewBox,{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}}),SVG.BBox=function(n){var t;if(this.x=0,this.y=0,this.width=0,this.height=0,n){try{t=n.node.getBBox()}catch(i){t={x:n.node.clientLeft,y:n.node.clientTop,width:n.node.clientWidth,height:n.node.clientHeight}}this.x=t.x+n.trans.x,this.y=t.y+n.trans.y,this.width=t.width*n.trans.scaleX,this.height=t.height*n.trans.scaleY}this.cx=this.x+this.width/2,this.cy=this.y+this.height/2},SVG.extend(SVG.BBox,{merge:function(n){var t=new SVG.BBox;return t.x=Math.min(this.x,n.x),t.y=Math.min(this.y,n.y),t.width=Math.max(this.x+this.width,n.x+n.width)-t.x,t.height=Math.max(this.y+this.height,n.y+n.height)-t.y,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}}),SVG.RBox=function(n){var t,i,r={};if(this.x=0,this.y=0,this.width=0,this.height=0,n){for(t=n.doc().parent,i=n.doc().viewbox().zoom,r=n.node.getBoundingClientRect(),this.x=r.left,this.y=r.top,this.x-=t.offsetLeft,this.y-=t.offsetTop;t=t.offsetParent;)this.x-=t.offsetLeft,this.y-=t.offsetTop;for(t=n;t=t.parent;)t.type=="svg"&&t.viewbox&&(i*=t.viewbox().zoom,this.x-=t.x()||0,this.y-=t.y()||0)}this.x/=i,this.y/=i,this.width=r.width/=i,this.height=r.height/=i,this.cx=this.x+this.width/2,this.cy=this.y+this.height/2},SVG.extend(SVG.RBox,{merge:function(n){var t=new SVG.RBox;return t.x=Math.min(this.x,n.x),t.y=Math.min(this.y,n.y),t.width=Math.max(this.x+this.width,n.x+n.width)-t.x,t.height=Math.max(this.y+this.height,n.y+n.height)-t.y,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}}),SVG.Element=function(n){this._stroke=SVG.defaults.attrs.stroke,this.styles={},this.trans=SVG.defaults.trans(),(this.node=n)&&(this.type=n.nodeName,this.node.instance=this)},SVG.extend(SVG.Element,{x:function(n){return n&&(n=new SVG.Number(n),n.value/=this.trans.scaleX),this.attr("x",n)},y:function(n){return n&&(n=new SVG.Number(n),n.value/=this.trans.scaleY),this.attr("y",n)},cx:function(n){return n==null?this.bbox().cx:this.x(n-this.bbox().width/2)},cy:function(n){return n==null?this.bbox().cy:this.y(n-this.bbox().height/2)},move:function(n,t){return this.x(n).y(t)},center:function(n,t){return this.cx(n).cy(t)},size:function(n,t){return this.attr({width:new SVG.Number(n),height:new SVG.Number(t)})},clone:function(){var t,i,n=this.type;return t=n=="rect"||n=="ellipse"?this.parent[n](0,0):n=="line"?this.parent[n](0,0,0,0):n=="image"?this.parent[n](this.src):n=="text"?this.parent[n](this.content):n=="path"?this.parent[n](this.attr("d")):n=="polyline"||n=="polygon"?this.parent[n](this.attr("points")):n=="g"?this.parent.group():this.parent[n](),i=this.attr(),delete i.id,t.attr(i),t.trans=this.trans,t.transform({})},remove:function(){return this.parent&&this.parent.removeElement(this),this},doc:function(n){return this._parent(n||SVG.Doc)},attr:function(n,t,i){if(n==null){for(n={},t=this.node.attributes,i=t.length-1;i>=0;i--)n[t[i].nodeName]=SVG.regex.test(t[i].nodeValue,"isNumber")?parseFloat(t[i].nodeValue):t[i].nodeValue;return n}if(typeof n=="object")for(t in n)this.attr(t,n[t]);else if(t===null)this.node.removeAttribute(n);else{if(t==null)return this._isStyle(n)?n=="text"?this.content:n=="leading"&&this.leading?this.leading():this.style(n):(t=this.node.getAttribute(n),t==null?SVG.defaults.attrs[n]:SVG.regex.test(t,"isNumber")?parseFloat(t):t);if(n=="style")return this.style(t);if(n=="x"&&Array.isArray(this.lines))for(i=this.lines.length-1;i>=0;i--)this.lines[i].attr(n,t);n=="stroke-width"?this.attr("stroke",parseFloat(t)>0?this._stroke:null):n=="stroke"&&(this._stroke=t),SVG.Color.test(t)||SVG.Color.isRgb(t)?t=new SVG.Color(t):typeof t=="number"?t=new SVG.Number(t):Array.isArray(t)&&(t=new SVG.Array(t)),i!=null?this.node.setAttributeNS(i,n,t.toString()):this.node.setAttribute(n,t.toString()),this._isStyle(n)&&(n=="text"?this.text(t):n=="leading"&&this.leading?this.leading(t):this.style(n,t),this.rebuild&&this.rebuild(n,t))}return this},transform:function(n,t){var i;if(arguments.length==0)return this.trans;if(typeof n=="string")return arguments.length<2?this.trans[n]:(i={},i[n]=t,this.transform(i));i=[],n=this._parseMatrix(n);for(t in n)n[t]!=null&&(this.trans[t]=n[t]);return this.trans.matrix=this.trans.a+" "+this.trans.b+" "+this.trans.c+" "+this.trans.d+" "+this.trans.e+" "+this.trans.f,n=this.trans,n.matrix!=SVG.defaults.matrix&&i.push("matrix("+n.matrix+")"),n.rotation!=0&&i.push("rotate("+n.rotation+" "+(n.cx==null?this.bbox().cx:n.cx)+" "+(n.cy==null?this.bbox().cy:n.cy)+")"),(n.scaleX!=1||n.scaleY!=1)&&i.push("scale("+n.scaleX+" "+n.scaleY+")"),n.skewX!=0&&i.push("skewX("+n.skewX+")"),n.skewY!=0&&i.push("skewY("+n.skewY+")"),(n.x!=0||n.y!=0)&&i.push("translate("+new SVG.Number(n.x/n.scaleX)+" "+new SVG.Number(n.y/n.scaleY)+")"),this._offset&&this._offset.x!=0&&this._offset.y!=0&&i.push("translate("+-this._offset.x+" "+-this._offset.y+")"),i.length==0?this.node.removeAttribute("transform"):this.node.setAttribute("transform",i.join(" ")),this},style:function(n,t){if(arguments.length==0)return this.attr("style")||"";if(arguments.length<2)if(typeof n=="object")for(t in n)this.style(t,n[t]);else if(SVG.regex.isCss.test(n)){n=n.split(";");for(var i=0;i<n.length;i++)t=n[i].split(":"),t.length==2&&this.style(t[0].replace(/\s+/g,""),t[1].replace(/^\s+/,"").replace(/\s+$/,""))}else return this.styles[n];else t===null||SVG.regex.test(t,"isBlank")?delete this.styles[n]:this.styles[n]=t;n="";for(t in this.styles)n+=t+":"+this.styles[t]+";";return n==""?this.node.removeAttribute("style"):this.node.setAttribute("style",n),this},data:function(n,t,i){if(arguments.length<2)try{return JSON.parse(this.attr("data-"+n))}catch(r){return this.attr("data-"+n)}else this.attr("data-"+n,t===null?null:i===!0||typeof t=="string"||typeof t=="number"?t:JSON.stringify(t));return this},bbox:function(){return new SVG.BBox(this)},rbox:function(){return new SVG.RBox(this)},inside:function(n,t){var i=this.bbox();return n>i.x&&t>i.y&&n<i.x+i.width&&t<i.y+i.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},_parent:function(n){for(var t=this;t!=null&&!(t instanceof n);)t=t.parent;return t},_isStyle:function(n){return typeof n=="string"?SVG.regex.test(n,"isStyle"):!1},_parseMatrix:function(n){if(n.matrix){var t=n.matrix.replace(/\s/g,"").split(",");t.length==6&&(n.a=parseFloat(t[0]),n.b=parseFloat(t[1]),n.c=parseFloat(t[2]),n.d=parseFloat(t[3]),n.e=parseFloat(t[4]),n.f=parseFloat(t[5]))}return n}}),SVG.Parent=function(n){this.constructor.call(this,n)},SVG.Parent.prototype=new SVG.Element,SVG.extend(SVG.Parent,{children:function(){return this._children||(this._children=[])},add:function(n,t){if(!this.has(n)){if(t=t==null?this.children().length:t,n.parent){var i=n.parent.children().indexOf(n);n.parent.children().splice(i,1)}this.children().splice(t,0,n),this.node.insertBefore(n.node,this.node.childNodes[t]||null),n.parent=this}return this._defs&&(this.node.removeChild(this._defs.node),this.node.appendChild(this._defs.node)),this},put:function(n,t){return this.add(n,t),n},has:function(n){return this.children().indexOf(n)>=0},get:function(n){return this.children()[n]},first:function(){return this.children()[0]},last:function(){return this.children()[this.children().length-1]},each:function(n,t){for(var r=this.children(),i=0,u=r.length;i<u;i++)r[i]instanceof SVG.Element&&n.apply(r[i],[i,r]),t&&r[i]instanceof SVG.Container&&r[i].each(n,t);return this},removeElement:function(n){var t=this.children().indexOf(n);return this.children().splice(t,1),this.node.removeChild(n.node),n.parent=null,this},clear:function(){for(var n=this.children().length-1;n>=0;n--)this.removeElement(this.children()[n]);return this._defs&&this._defs.clear(),this},defs:function(){return this.doc().defs()}}),SVG.Container=function(n){this.constructor.call(this,n)},SVG.Container.prototype=new SVG.Parent,SVG.extend(SVG.Container,{viewbox:function(n){return arguments.length==0?new SVG.ViewBox(this):(n=arguments.length==1?[n.x,n.y,n.width,n.height]:[].slice.call(arguments),this.attr("viewBox",n))}}),SVG.FX=function(n){this.target=n},SVG.extend(SVG.FX,{animate:function(n,t,i){var f,e,o,s,u=this.target,r=this;return typeof n=="object"&&(i=n.delay,t=n.ease,n=n.duration),n=n==null?1e3:n,t=t||"<>",r.to=function(n){var i,c,h;if(n=n<0?0:n>1?1:n,f==null){f=[];for(s in r.attrs)f.push(s);u.morphArray&&(h=new u.morphArray(r._plot||u.points.toString()),r._size&&h.size(r._size.width.to,r._size.height.to),c=h.bbox(),r._x?h.move(r._x.to,c.y):r._cx&&h.move(r._cx.to-c.width/2,c.y),c=h.bbox(),r._y?h.move(c.x,r._y.to):r._cy&&h.move(c.x,r._cy.to-c.height/2),delete r._x,delete r._y,delete r._cx,delete r._cy,delete r._size,r._plot=u.points.morph(h))}if(e==null){e=[];for(s in r.trans)e.push(s)}if(o==null){o=[];for(s in r.styles)o.push(s)}for(n=t=="<>"?-Math.cos(n*Math.PI)/2+.5:t==">"?Math.sin(n*Math.PI/2):t=="<"?-Math.cos(n*Math.PI/2)+1:t=="-"?n:typeof t=="function"?t(n):n,r._x?u.x(r._at(r._x,n)):r._cx&&u.cx(r._at(r._cx,n)),r._y?u.y(r._at(r._y,n)):r._cy&&u.cy(r._at(r._cy,n)),r._size&&u.size(r._at(r._size.width,n),r._at(r._size.height,n)),r._plot&&u.plot(r._plot.at(n)),r._viewbox&&u.viewbox(r._at(r._viewbox.x,n),r._at(r._viewbox.y,n),r._at(r._viewbox.width,n),r._at(r._viewbox.height,n)),i=f.length-1;i>=0;i--)u.attr(f[i],r._at(r.attrs[f[i]],n));for(i=e.length-1;i>=0;i--)u.transform(e[i],r._at(r.trans[e[i]],n));for(i=o.length-1;i>=0;i--)u.style(o[i],r._at(r.styles[o[i]],n));r._during&&r._during.call(u,n,function(t,i){return r._at({from:t,to:i},n)})},typeof n=="number"&&(this.timeout=setTimeout(function(){var t=1e3/60,i=(new Date).getTime(),f=i+n;r.interval=setInterval(function(){var t=(new Date).getTime(),e=t>f?1:(t-i)/n;r.to(e),t>f&&(r._plot&&u.plot(new SVG.PointArray(r._plot.destination).settle()),clearInterval(r.interval),r._after?r._after.apply(u,[r]):r.stop())},n>t?t:n)},i||0)),this},bbox:function(){return this.target.bbox()},attr:function(n,t){if(typeof n=="object")for(var i in n)this.attr(i,n[i]);else this.attrs[n]={from:this.target.attr(n),to:t};return this},transform:function(n,t){if(arguments.length==1){n=this.target._parseMatrix(n),delete n.matrix;for(t in n)this.trans[t]={from:this.target.trans[t],to:n[t]}}else{var i={};i[n]=t,this.transform(i)}return this},style:function(n,t){if(typeof n=="object")for(var i in n)this.style(i,n[i]);else this.styles[n]={from:this.target.style(n),to:t};return this},x:function(n){return this._x={from:this.target.x(),to:n},this},y:function(n){return this._y={from:this.target.y(),to:n},this},cx:function(n){return this._cx={from:this.target.cx(),to:n},this},cy:function(n){return this._cy={from:this.target.cy(),to:n},this},move:function(n,t){return this.x(n).y(t)},center:function(n,t){return this.cx(n).cy(t)},size:function(n,t){if(this.target instanceof SVG.Text)this.attr("font-size",n);else{var i=this.target.bbox();this._size={width:{from:i.width,to:n},height:{from:i.height,to:t}}}return this},plot:function(n){return this._plot=n,this},viewbox:function(n,t,i,r){if(this.target instanceof SVG.Container){var u=this.target.viewbox();this._viewbox={x:{from:u.x,to:n},y:{from:u.y,to:t},width:{from:u.width,to:i},height:{from:u.height,to:r}}}return this},update:function(n){return this.target instanceof SVG.Stop&&(n.opacity!=null&&this.attr("stop-opacity",n.opacity),n.color!=null&&this.attr("stop-color",n.color),n.offset!=null&&this.attr("offset",new SVG.Number(n.offset))),this},during:function(n){return this._during=n,this},after:function(n){return this._after=n,this},stop:function(){return clearTimeout(this.timeout),clearInterval(this.interval),this.attrs={},this.trans={},this.styles={},delete this._x,delete this._y,delete this._cx,delete this._cy,delete this._size,delete this._plot,delete this._after,delete this._during,delete this._viewbox,this},_at:function(n,t){return typeof n.from=="number"?n.from+(n.to-n.from)*t:SVG.regex.unit.test(n.to)?new SVG.Number(n.to).minus(new SVG.Number(n.from)).times(t).plus(new SVG.Number(n.from)):n.to&&(n.to.r||SVG.Color.test(n.to))?this._color(n,t):t<1?n.from:n.to},_color:function(n,t){var i,r;return t=t<0?0:t>1?1:t,i=new SVG.Color(n.from),r=new SVG.Color(n.to),new SVG.Color({r:~~(i.r+(r.r-i.r)*t),g:~~(i.g+(r.g-i.g)*t),b:~~(i.b+(r.b-i.b)*t)}).toHex()}}),SVG.extend(SVG.Element,{animate:function(n,t,i){return(this.fx||(this.fx=new SVG.FX(this))).stop().animate(n,t,i)},stop:function(){return this.fx&&this.fx.stop(),this}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave"].forEach(function(n){SVG.Element.prototype[n]=function(t){var i=this;return this.node["on"+n]=typeof t=="function"?function(){return t.apply(i,arguments)}:null,this}}),SVG.on=function(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent("on"+t,i)},SVG.off=function(n,t,i){n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent("on"+t,i)},SVG.extend(SVG.Element,{on:function(n,t){SVG.on(this.node,n,t);return this},off:function(n,t){return SVG.off(this.node,n,t),this}}),SVG.Defs=function(){this.constructor.call(this,SVG.create("defs"))},SVG.Defs.prototype=new SVG.Container,SVG.G=function(){this.constructor.call(this,SVG.create("g"))},SVG.G.prototype=new SVG.Container,SVG.extend(SVG.G,{x:function(n){return n==null?this.trans.x:this.transform("x",n)},y:function(n){return n==null?this.trans.y:this.transform("y",n)}}),SVG.extend(SVG.Container,{group:function(){return this.put(new SVG.G)}}),SVG.extend(SVG.Element,{siblings:function(){return this.parent.children()},position:function(){var n=this.siblings();return n.indexOf(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var n=this.position();return this.parent.removeElement(this).put(this,n+1)},backward:function(){var n=this.position();return n>0&&this.parent.removeElement(this).add(this,n-1),this},front:function(){return this.parent.removeElement(this).put(this)},back:function(){return this.position()>0&&this.parent.removeElement(this).add(this,0),this},before:function(n){n.remove();var t=this.position();return this.parent.add(n,t),this},after:function(n){n.remove();var t=this.position();return this.parent.add(n,t+1),this}}),SVG.Mask=function(){this.constructor.call(this,SVG.create("mask")),this.targets=[]},SVG.Mask.prototype=new SVG.Container,SVG.extend(SVG.Mask,{remove:function(){for(var n=this.targets.length-1;n>=0;n--)this.targets[n]&&this.targets[n].unmask();return delete this.targets,this.parent.removeElement(this),this}}),SVG.extend(SVG.Element,{maskWith:function(n){return this.masker=n instanceof SVG.Mask?n:this.parent.mask().add(n),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),SVG.extend(SVG.Container,{mask:function(){return this.defs().put(new SVG.Mask)}}),SVG.Clip=function(){this.constructor.call(this,SVG.create("clipPath")),this.targets=[]},SVG.Clip.prototype=new SVG.Container,SVG.extend(SVG.Clip,{remove:function(){for(var n=this.targets.length-1;n>=0;n--)this.targets[n]&&this.targets[n].unclip();return delete this.targets,this.parent.removeElement(this),this}}),SVG.extend(SVG.Element,{clipWith:function(n){return this.clipper=n instanceof SVG.Clip?n:this.parent.clip().add(n),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),SVG.extend(SVG.Container,{clip:function(){return this.defs().put(new SVG.Clip)}}),SVG.Gradient=function(n){this.constructor.call(this,SVG.create(n+"Gradient")),this.type=n},SVG.Gradient.prototype=new SVG.Container,SVG.extend(SVG.Gradient,{from:function(n,t){return this.type=="radial"?this.attr({fx:new SVG.Number(n),fy:new SVG.Number(t)}):this.attr({x1:new SVG.Number(n),y1:new SVG.Number(t)})},to:function(n,t){return this.type=="radial"?this.attr({cx:new SVG.Number(n),cy:new SVG.Number(t)}):this.attr({x2:new SVG.Number(n),y2:new SVG.Number(t)})},radius:function(n){return this.type=="radial"?this.attr({r:new SVG.Number(n)}):this},at:function(n){return this.put(new SVG.Stop(n))},update:function(n){return this.clear(),n(this),this},fill:function(){return"url(#"+this.attr("id")+")"},toString:function(){return this.fill()}}),SVG.extend(SVG.Defs,{gradient:function(n,t){var i=this.put(new SVG.Gradient(n));return t(i),i}}),SVG.extend(SVG.Container,{gradient:function(n,t){return this.defs().gradient(n,t)}}),SVG.Stop=function(n){this.constructor.call(this,SVG.create("stop")),this.update(n)},SVG.Stop.prototype=new SVG.Element,SVG.extend(SVG.Stop,{update:function(n){return n.opacity!=null&&this.attr("stop-opacity",n.opacity),n.color!=null&&this.attr("stop-color",n.color),n.offset!=null&&this.attr("offset",new SVG.Number(n.offset)),this}}),SVG.Doc=function(n){this.parent=typeof n=="string"?document.getElementById(n):n,this.constructor.call(this,this.parent.nodeName=="svg"?this.parent:SVG.create("svg")),this.attr({xmlns:SVG.ns,version:"1.1",width:"100%",height:"100%"}).attr("xlink",SVG.xlink,SVG.ns),this._defs=new SVG.Defs,this.node.appendChild(this._defs.node),this.parent.nodeName!="svg"&&this.stage()},SVG.Doc.prototype=new SVG.Container,SVG.extend(SVG.Doc,{stage:function(){var t,n=this,i=document.createElement("div");return i.style.cssText="position:relative;height:100%;",n.parent.appendChild(i),i.appendChild(n.node),t=function(){document.readyState==="complete"?(n.style("position:absolute;"),setTimeout(function(){n.style("position:relative;overflow:hidden;"),n.parent.removeChild(n.node.parentNode),n.node.parentNode.removeChild(n.node),n.parent.appendChild(n.node),n.fixSubPixelOffset();SVG.on(window,"resize",function(){n.fixSubPixelOffset()})},5)):setTimeout(t,10)},t(),this},defs:function(){return this._defs},fixSubPixelOffset:function(){var n=this.node.getScreenCTM();this.style("left",-n.e%1+"px").style("top",-n.f%1+"px")}}),SVG.Shape=function(n){this.constructor.call(this,n)},SVG.Shape.prototype=new SVG.Element,SVG.Use=function(){this.constructor.call(this,SVG.create("use"))},SVG.Use.prototype=new SVG.Shape,SVG.extend(SVG.Use,{element:function(n){return this.target=n,this.attr("href","#"+n,SVG.xlink)}}),SVG.extend(SVG.Container,{use:function(n){return this.put(new SVG.Use).element(n)}}),SVG.Rect=function(){this.constructor.call(this,SVG.create("rect"))},SVG.Rect.prototype=new SVG.Shape,SVG.extend(SVG.Container,{rect:function(n,t){return this.put((new SVG.Rect).size(n,t))}}),SVG.Ellipse=function(){this.constructor.call(this,SVG.create("ellipse"))},SVG.Ellipse.prototype=new SVG.Shape,SVG.extend(SVG.Ellipse,{x:function(n){return n==null?this.cx()-this.attr("rx"):this.cx(n+this.attr("rx"))},y:function(n){return n==null?this.cy()-this.attr("ry"):this.cy(n+this.attr("ry"))},cx:function(n){return n==null?this.attr("cx"):this.attr("cx",new SVG.Number(n).divide(this.trans.scaleX))},cy:function(n){return n==null?this.attr("cy"):this.attr("cy",new SVG.Number(n).divide(this.trans.scaleY))},size:function(n,t){return this.attr({rx:new SVG.Number(n).divide(2),ry:new SVG.Number(t).divide(2)})}}),SVG.extend(SVG.Container,{circle:function(n){return this.ellipse(n,n)},ellipse:function(n,t){return this.put(new SVG.Ellipse).size(n,t).move(0,0)}}),SVG.Line=function(){this.constructor.call(this,SVG.create("line"))},SVG.Line.prototype=new SVG.Shape,SVG.extend(SVG.Line,{x:function(n){var t=this.bbox();return n==null?t.x:this.attr({x1:this.attr("x1")-t.x+n,x2:this.attr("x2")-t.x+n})},y:function(n){var t=this.bbox();return n==null?t.y:this.attr({y1:this.attr("y1")-t.y+n,y2:this.attr("y2")-t.y+n})},cx:function(n){var t=this.bbox().width/2;return n==null?this.x()+t:this.x(n-t)},cy:function(n){var t=this.bbox().height/2;return n==null?this.y()+t:this.y(n-t)},size:function(n,t){var i=this.bbox();return this.attr(this.attr("x1")<this.attr("x2")?"x2":"x1",i.x+n).attr(this.attr("y1")<this.attr("y2")?"y2":"y1",i.y+t)},plot:function(n,t,i,r){return this.attr({x1:n,y1:t,x2:i,y2:r})}}),SVG.extend(SVG.Container,{line:function(n,t,i,r){return this.put((new SVG.Line).plot(n,t,i,r))}}),SVG.Polyline=function(){this.constructor.call(this,SVG.create("polyline"))},SVG.Polyline.prototype=new SVG.Shape,SVG.Polygon=function(){this.constructor.call(this,SVG.create("polygon"))},SVG.Polygon.prototype=new SVG.Shape,SVG.extend(SVG.Polyline,SVG.Polygon,{morphArray:SVG.PointArray,plot:function(n){return this.attr("points",this.points=new SVG.PointArray(n,[[0,0]]))},move:function(n,t){return this.attr("points",this.points.move(n,t))},x:function(n){return n==null?this.bbox().x:this.move(n,this.bbox().y)},y:function(n){return n==null?this.bbox().y:this.move(this.bbox().x,n)},size:function(n,t){return this.attr("points",this.points.size(n,t))}}),SVG.extend(SVG.Container,{polyline:function(n){return this.put(new SVG.Polyline).plot(n)},polygon:function(n){return this.put(new SVG.Polygon).plot(n)}}),SVG.Path=function(n){this.constructor.call(this,SVG.create("path")),this.unbiased=!!n},SVG.Path.prototype=new SVG.Shape,SVG.extend(SVG.Path,{_plot:function(n){return this.attr("d",n||"M0,0")}}),SVG.extend(SVG.Container,{path:function(n,t){return this.put(new SVG.Path(t)).plot(n)}}),SVG.extend(SVG.Path,{x:function(n){return n==null?this.bbox().x:this.transform("x",n)},y:function(n){return n==null?this.bbox().y:this.transform("y",n)},size:function(n,t){var i=n/this._offset.width;return this.transform({scaleX:i,scaleY:t!=null?t/this._offset.height:i})},plot:function(n){var t=this.trans.scaleX,i=this.trans.scaleY;return this._plot(n),this._offset=this.transform({scaleX:1,scaleY:1}).bbox(),this.unbiased?this._offset.x=this._offset.y=0:(this._offset.x-=this.trans.x,this._offset.y-=this.trans.y),this.transform({scaleX:t,scaleY:i})}}),SVG.Image=function(){this.constructor.call(this,SVG.create("image"))},SVG.Image.prototype=new SVG.Shape,SVG.extend(SVG.Image,{load:function(n){return n?this.attr("href",this.src=n,SVG.xlink):this}}),SVG.extend(SVG.Container,{image:function(n,t,i){return t=t!=null?t:100,this.put((new SVG.Image).load(n).size(t,i!=null?i:t))}}),n="size family weight stretch variant style".split(" "),SVG.Text=function(){this.constructor.call(this,SVG.create("text")),this.styles={"font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"},this._leading=new SVG.Number("1.2em"),this._rebuild=!0},SVG.Text.prototype=new SVG.Shape,SVG.extend(SVG.Text,{x:function(n,t){return n==null?t?this.attr("x"):this.bbox().x:(t||(t=this.style("text-anchor"),n=t=="start"?n:t=="end"?n+this.bbox().width:n+this.bbox().width/2),this.textPath||this.lines.each(function(){this.newLined&&this.x(n)}),this.attr("x",n))},cx:function(n){return n==null?this.bbox().cx:this.x(n-this.bbox().width/2)},cy:function(n,t){return n==null?this.bbox().cy:this.y(t?n:n-this.bbox().height/2)},move:function(n,t,i){return this.x(n,i).y(t)},center:function(n,t,i){return this.cx(n,i).cy(t,i)},text:function(n){if(n==null)return this.content;if(this.clear(),typeof n=="function")this._rebuild=!1,n(this);else{this._rebuild=!0,n=SVG.regex.isBlank.test(n)?"text":n;for(var r=n.split("\n"),t=0,i=r.length;t<i;t++)this.tspan(r[t]).newLine();this.rebuild()}return this},tspan:function(n){var r=this.textPath?this.textPath.node:this.node,t=(new SVG.TSpan).text(n),i=this.style();return r.appendChild(t.node),this.lines.add(t),SVG.regex.isBlank.test(i)||t.style(i),this.content+=n,t.parent=this,t},size:function(n){return this.attr("font-size",n)},leading:function(n){return n==null?this._leading:(n=new SVG.Number(n),this._leading=n,this.lines.each(function(){this.newLined&&this.attr("dy",n)}),this)},rebuild:function(){var n=this;return this._rebuild&&this.lines.attr({x:this.attr("x"),dy:this._leading,style:this.style()}),this},clear:function(){for(var n=this.textPath?this.textPath.node:this.node;n.hasChildNodes();)n.removeChild(n.lastChild);return delete this.lines,this.lines=new SVG.Set,this.content="",this}}),SVG.extend(SVG.Container,{text:function(n){return this.put(new SVG.Text).text(n)}}),SVG.TSpan=function(){this.constructor.call(this,SVG.create("tspan"))},SVG.TSpan.prototype=new SVG.Shape,SVG.extend(SVG.TSpan,{text:function(n){return this.node.appendChild(document.createTextNode(n)),this},dx:function(n){return this.attr("dx",n)},dy:function(n){return this.attr("dy",n)},newLine:function(){return this.newLined=!0,this.parent.content+="\n",this.dy(this.parent._leading),this.attr("x",this.parent.x())}}),SVG.TextPath=function(){this.constructor.call(this,SVG.create("textPath"))},SVG.TextPath.prototype=new SVG.Element,SVG.extend(SVG.Text,{path:function(n){for(this.textPath=new SVG.TextPath;this.node.hasChildNodes();)this.textPath.node.appendChild(this.node.firstChild);return this.node.appendChild(this.textPath.node),this.track=this.doc().defs().path(n,!0),this.textPath.parent=this,this.textPath.attr("href","#"+this.track,SVG.xlink),this},plot:function(n){return this.track&&this.track.plot(n),this}}),SVG.Nested=function(){this.constructor.call(this,SVG.create("svg")),this.style("overflow","visible")},SVG.Nested.prototype=new SVG.Container,SVG.extend(SVG.Container,{nested:function(){return this.put(new SVG.Nested)}}),SVG._stroke=["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],SVG._fill=["color","opacity","rule"],t=function(n,t){return t=="color"?n:n+"-"+t},["fill","stroke"].forEach(function(n){var i={};i[n]=function(i){if(typeof i=="string"||SVG.Color.isRgb(i)||i&&typeof i.fill=="function")this.attr(n,i);else for(index=SVG["_"+n].length-1;index>=0;index--)i[SVG["_"+n][index]]!=null&&this.attr(t(n,SVG["_"+n][index]),i[SVG["_"+n][index]]);return this},SVG.extend(SVG.Element,SVG.FX,i)}),SVG.extend(SVG.Element,SVG.FX,{rotate:function(n,t,i){return this.transform({rotation:n||0,cx:t,cy:i})},skew:function(n,t){return this.transform({skewX:n||0,skewY:t||0})},scale:function(n,t){return this.transform({scaleX:n,scaleY:t==null?n:t})},translate:function(n,t){return this.transform({x:n,y:t})},matrix:function(n){return this.transform({matrix:n})},opacity:function(n){return this.attr("opacity",n)}}),SVG.Text&&SVG.extend(SVG.Text,SVG.FX,{font:function(t){for(var i in t)i=="anchor"?this.attr("text-anchor",t[i]):n.indexOf(i)>-1?this.attr("font-"+i,t[i]):this.attr(i,t[i]);return this}}),SVG.Set=function(){this.clear()},SVG.SetFX=function(n){this.set=n},SVG.extend(SVG.Set,{add:function(){for(var i=[].slice.call(arguments),n=0,t=i.length;n<t;n++)this.members.push(i[n]);return this},remove:function(n){var t=this.members.indexOf(n);return t>-1&&this.members.splice(t,1),this},each:function(n){for(var t=0,i=this.members.length;t<i;t++)n.apply(this.members[t],[t,this.members]);return this},clear:function(){return this.members=[],this},valueOf:function(){return this.members}}),SVG.Set.inherit=function(){var t=[],n;for(n in SVG.Shape.prototype)typeof SVG.Shape.prototype[n]=="function"&&typeof SVG.Set.prototype[n]!="function"&&t.push(n);t.forEach(function(n){SVG.Set.prototype[n]=function(){for(var t=0,i=this.members.length;t<i;t++)this.members[t]&&typeof this.members[t][n]=="function"&&this.members[t][n].apply(this.members[t],arguments);return n=="animate"?this.fx||(this.fx=new SVG.SetFX(this)):this}}),t=[];for(n in SVG.FX.prototype)typeof SVG.FX.prototype[n]=="function"&&typeof SVG.SetFX.prototype[n]!="function"&&t.push(n);t.forEach(function(n){SVG.SetFX.prototype[n]=function(){for(var t=0,i=this.set.members.length;t<i;t++)this.set.members[t].fx[n].apply(this.set.members[t].fx,arguments);return this}})},SVG.extend(SVG.Container,{set:function(){return new SVG.Set}}),SVG.extend(SVG.Element,{remember:function(n,t){if(typeof arguments[0]=="object")for(var t in n)this.remember(t,n[t]);else{if(arguments.length==1)return this.memory()[n];this.memory()[n]=t}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var n=arguments.length-1;n>=0;n--)delete this.memory()[arguments[n]];return this},memory:function(){return this._memory||(this._memory={})}}),typeof define=="function"&&define.amd?define(function(){return SVG}):typeof exports!="undefined"&&(exports.SVG=SVG)}).call(this);